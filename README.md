# README

[CBOR](https://tools.ietf.org/html/rfc7049) is a binary format, which is intended to be
used in-place of JSON, when a fast and more expressive representation of data is needed.

This package adds decoding (reading) of CBOR serialized values to [Cuis Smalltalk](http://cuis-smalltalk.org),
in later versions also encoding (writing) will be added.

# Example of usage

To read a CBOR encoded file you use the reader like this:

```smalltalk
  filename := '/home/user/projects/cuis-cbor/example.cbor'.

  filename asFileEntry readStreamDo: [:stream |
	stream binary.
	reader := CborReader on: stream.

	reader next ] 
```

For convenience a `example.cbor` is included, which was generated by the ruby cbor gem. The
example above then returns `a Dictionary('foo'->1 'hello'->'from ruby' 'moo'->#(1 2 #(56 89 10)) )`.

To write out a CBOR encoded file you use the writer like this:

```smalltalk
    dict := Dictionary new.
    dict at: 'foo' put: 1.
    dict at: 'hello' put: 'number'.
    dict at: 'word' put: #(4 5 6).
    dict at: 'floating' put: 45.89.
    dict at: 'bignum' put: 12323323213232131231412454565656565765767676767676.

    array _ {
        1.
        'Cheesecake'.
        5.8.
        dict.
        #(8 32 1 2 3 5 6 7 10 202 30 40)
    }.

    filename := '/home/user/projects/cuis-cbor/serialized.cbor'.
    stream := filename asFileEntry writeStream.
    stream useBytes.

    encoder := CborWriter on: stream.
    encoder nextPut: array.

    stream flush.
    stream close.
```

This then can be read back in for example in ruby with the snippet,
using the ruby [cbor gem](https://rubygems.org/gems/cbor):

```ruby
    cbor = File.read("serialized.cbor")
    CBOR.decode(cbor)
    => [1, "Cheesecake", 5.8, {
               "floating"=>45.89,
               "foo"=>1,
               "hello"=>"number",
               "word"=>[4, 5, 6],
               "bignum"=> 12323323213232131231412454565656565765767676767676
               },
          [8, 32, 1, 2, 3, 5, 6, 7, 10, 202, 30, 40]]
```

# License
    MIT License, Copyright Â© 2020 Josef Philip Bernhart
